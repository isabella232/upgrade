# Migration `20200629154555-init`

This migration has been generated by Matthew Mueller at 6/29/2020, 3:45:55 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `prisma_test`.`User` DROP COLUMN `name`,
ADD COLUMN `bestFriendId` varchar(191) NOT NULL ;

ALTER TABLE `prisma_test`.`Profile` DROP FOREIGN KEY `Profile_ibfk_1`;

CREATE UNIQUE INDEX `User.bestFriendId` ON `prisma_test`.`User`(`bestFriendId`)

CREATE  INDEX `BestFriend` ON `prisma_test`.`User`(`bestFriendId`)

ALTER TABLE `prisma_test`.`User` ADD FOREIGN KEY (`bestFriendId`) REFERENCES `prisma_test`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

DROP TABLE `prisma_test`.`Profile`;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200629154555-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,13 @@
+datasource db {
+  provider = "mysql"
+  url      = "mysql://root@localhost:3306/prisma_test"
+}
+
+model User {
+  id           String  @default(cuid()) @id
+  bestFriendId String @unique
+  bestFriend   User    @relation("BestFriend", fields: [bestFriendId], references: [id])
+  user         User?   @relation("BestFriend")
+
+  @@index([bestFriendId], name: "BestFriend")
+}
```


